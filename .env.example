# Strava API Configuration
STRAVA_CLIENT_ID=123456
STRAVA_CLIENT_SECRET=sdnff349f309fn3fn34fn34943fn304f43fn
STRAVA_REDIRECT_URI=http://localhost:8000/callback

# Database Configuration
DATABASE_URL=sqlite:///./strava_supercompensation.db

# Model Parameters (optional - defaults will be used if not set)
# These control how fitness and fatigue build up and decay over time
# Based on Banister's Training Impulse model used in sports science
# FITNESS_DECAY_RATE: How many days for fitness to decay to ~37% (1/e) of peak
# Higher values = fitness decays more slowly (you retain form longer)
# Typical range: 20-70 days. Endurance athletes often use 40-50 days
FITNESS_DECAY_RATE=42


# FATIGUE_DECAY_RATE: How many days for fatigue to decay to ~37% (1/e) of peak
# Lower values = you recover from fatigue faster
# Typical range: 3-14 days. Well-trained athletes recover faster (5-7 days)
FATIGUE_DECAY_RATE=7

# FITNESS_MAGNITUDE: How much each TSS point contributes to fitness
# With proper CTL/ATL formula, this should be 1.0 for standard calculation
# This gives the same results as Training Peaks, Garmin, Strava
FITNESS_MAGNITUDE=1.0

# FATIGUE_MAGNITUDE: How much each TSS point contributes to fatigue
# With proper ATL formula, this should be 1.0 for standard calculation
# This matches what athletes expect from their training software
FATIGUE_MAGNITUDE=1.0

# Physiological Bounds - Prevent Corrupted Metrics
# These bounds prevent database corruption from extreme/invalid training loads
# while allowing realistic values for serious endurance athletes

# MAX_DAILY_LOAD: Maximum realistic training stress score per day
# 600 TSS allows for occasional ultra-endurance events
# This is realistic for events like gran fondos or long races
MAX_DAILY_LOAD=600

# MAX_FITNESS: Maximum sustainable fitness level (CTL)
# 200 CTL is achievable for serious competitive athletes
# Not Tour de France level, but serious amateur racing
MAX_FITNESS=200

# MAX_FATIGUE: Maximum sustainable fatigue level (ATL)
# 150 ATL can occur during heavy training blocks
# This is high but realistic for race weeks
MAX_FATIGUE=150

# MAX_FORM: Maximum form magnitude (TSB = CTL - ATL)
# ±100 TSB allows full range from deep fatigue to peak form
# Competitive athletes can handle wider swings
MAX_FORM=100

# Application Settings
LOG_LEVEL=INFO
PORT=8000

# Personal Garmin Connect credentials
GARMIN_EMAIL=max@mustermann.de
GARMIN_PASSWORD=mypassword


# RENPHO Body Composition Integration
RENPHO_EMAIL="max@musterfrau.de"
RENPHO_PASSWORD="mypassword"

# Multi-Sport Configuration (enable/disable sports for recommendations)
# Set to true/false to enable/disable each sport in recommendations
ENABLE_RUNNING=true
ENABLE_CYCLING=true
ENABLE_HIKING=true
ENABLE_WEIGHT_TRAINING=true
ENABLE_WORKOUT=true
ENABLE_ROWING=true
ENABLE_SWIMMING=false
ENABLE_SKIING=false
ENABLE_YOGA=false



# Sport Preferences (0.0-1.0, higher = more preferred)
# These influence sport rotation algorithm and prevent overuse injuries
# Values should add up to approximately 1.0 for balanced training
# Example values shown are based on typical multi-sport athlete patterns
PREFERENCE_RUNNING=0.35
PREFERENCE_CYCLING=0.35
PREFERENCE_HIKING=0.15
PREFERENCE_WEIGHT_TRAINING=0.15
PREFERENCE_WORKOUT=0.00
PREFERENCE_ROWING=0.05
PREFERENCE_SWIMMING=0.0
PREFERENCE_SKIING=0.0
PREFERENCE_YOGA=0.0


# Sport Recovery Times (hours until sport can be repeated at high intensity)
# Adjust based on your personal recovery capacity and injury history
# Higher values = longer mandatory rest between intense sessions
RECOVERY_TIME_RUNNING=30          # Optimized for Olympic training
RECOVERY_TIME_CYCLING=18          # Enhanced for frequent training
RECOVERY_TIME_HIKING=18           # Allows better rotation
RECOVERY_TIME_WEIGHT_TRAINING=36  # Balanced strength integration
RECOVERY_TIME_WORKOUT=24          # General functional training
RECOVERY_TIME_ROWING=24           # Full body, low impact
RECOVERY_TIME_SWIMMING=24         # Very low impact, fastest recovery
RECOVERY_TIME_SKIING=48           # High impact, technical demands
RECOVERY_TIME_YOGA=12             # Active recovery, minimal stress

# TIP: If you're injury-prone in a specific sport, increase its recovery time
# Example: RECOVERY_TIME_RUNNING=72 for runners with knee issues

# Training Plan Configuration
# These settings control how training plans are generated
TRAINING_MAX_WEEKLY_HOURS=16              # Maximum hours per week for training (default: 14)

# Mesocycle Hour Reduction Factors (multiply TRAINING_MAX_WEEKLY_HOURS by these factors)
# These allow for periodized hour limits - recovery weeks get fewer hours automatically
HOUR_FACTOR_ADAPTATION=1.0                # Base building: 100% of max hours
HOUR_FACTOR_ACCUMULATION=1.0              # Volume building: 100% of max hours
HOUR_FACTOR_INTENSIFICATION=0.9           # Quality focus: 90% of max hours
HOUR_FACTOR_REALIZATION=0.7               # Taper: 70% of max hours
HOUR_FACTOR_RECOVERY=0.5                  # Recovery: 50% of max hours (9.6h if max is 16h)
HOUR_FACTOR_MAINTENANCE=0.8               # Maintenance: 80% of max hours

# Mesocycle Duration Reduction Factors (shorter workouts for recovery phases)
DURATION_FACTOR_RECOVERY=0.5              # Recovery: 70% of normal duration (30% shorter)
DURATION_FACTOR_REALIZATION=0.8           # Taper: 80% of normal duration (20% shorter)
DURATION_FACTOR_MAINTENANCE=0.9           # Maintenance: 90% of normal duration (10% shorter)

# Activity-Specific Maximum Durations (minutes)
# Based on sport science research and Olympic training protocols
# These prevent overuse injuries and ensure optimal training adaptations

# ENDURANCE ACTIVITIES (Aerobic base - longer durations sustainable)
MAX_DURATION_CYCLING=300                  # 5 hours - low impact, efficient movement
MAX_DURATION_ROWING=60                   # 3 hours - full body, moderate impact
MAX_DURATION_SWIMMING=60                 # 4 hours - lowest impact, buoyancy support

# MODERATE IMPACT ACTIVITIES (Mixed energy systems)
MAX_DURATION_HIKING=360                   # 6 hours - low intensity, functional movement
MAX_DURATION_RUNNING=120                  # 3 hours - high impact, injury prevention priority
MAX_DURATION_SKIING=300                   # 5 hours - technical demands, environmental factors

# HIGH INTENSITY/STRENGTH ACTIVITIES (Neuromuscular focus - shorter optimal)
MAX_DURATION_WEIGHT_TRAINING=60          # 2 hours - neuromuscular fatigue limit
MAX_DURATION_WORKOUT=90                   # 1.5 hours - high intensity, varied movements
MAX_DURATION_YOGA=120                     # 2 hours - flexibility/mobility focus

# MESOCYCLE-SPECIFIC DURATION MULTIPLIERS (applied to max durations above)
# These further reduce max durations during specific training phases
MAX_DURATION_RECOVERY_MULTIPLIER=0.6      # Recovery: 60% of max duration
MAX_DURATION_TAPER_MULTIPLIER=0.8         # Taper: 80% of max duration
MAX_DURATION_INTENSIFICATION_MULTIPLIER=0.9  # Intensification: 90% of max duration
TRAINING_REST_DAYS=0                      # Rest days (0=Monday, 6=Sunday, comma-separated)
                                          # Example: 0,3 for Monday and Thursday rest days
                                          # Example: 0 for Monday only
                                          # Example: 6 for Sunday only
                                          # Leave empty to let optimizer decide based on fatigue
TRAINING_STRENGTH_DAYS=1                  # Mandatory strength training days (1=Tuesday, comma-separated)
                                          # Example: 1,4 for Tuesday and Friday strength
                                          # Example: 1 for Tuesday only
                                          # Leave empty to let system schedule strength flexibly

# RACE DAY PEAKING SYSTEM (Olympic Competition Periodization)
# Set target race dates for peak performance optimization
# Format: YYYY-MM-DD (multiple races separated by commas)
# Example: TARGET_RACE_DATES=2025-10-15,2025-11-20,2026-02-15

TARGET_RACE_DATES=2025-09-21,2026-03-22
PEAK_PERFORMANCE_DURATION=3               # Days at peak form (1-7)
TAPER_DURATION=4                         # Default days of tapering (override by sport/distance)
SUPERCOMPENSATION_WINDOW=7                # Days for supercompensation peak (5-10)

# Race Details (Sport and Distance for each race)
# Format: RACE_TYPE_YYYY_MM_DD=Sport (e.g., Run, Ride, Hike)
# Format: RACE_DISTANCE_YYYY_MM_DD=Distance in km
#RACE_TYPE_2025_10_10=Run
#RACE_DISTANCE_2025_10_10=70             # Any Ultra
#RACE_TYPE_2025_11_15=Ride
#RACE_DISTANCE_2025_11_15=180              # Long ride (6+ hours)
RACE_TYPE_2024_09_21=Run
RACE_DISTANCE_2024_09_21=21.1             # Half Marathon
RACE_TYPE_2026_03_22=Run
RACE_DISTANCE_2026_03_22=42.2             # Marathon

# Race Priority Levels (affects taper intensity)
# A_RACE: Major competition (full taper)
# B_RACE: Important race (moderate taper)
# C_RACE: Training race (mini-taper)
#RACE_PRIORITY_2025_10_10=A_RACE           # First target race
#RACE_PRIORITY_2025_11_15=A_RACE           # Second target race
RACE_PRIORITY_2025_09_21=A_RACE           # Recent Half Marathon
RACE_PRIORITY_2026_03_22=A_RACE           # Future Marathon

# 🏃 RUNNING TAPER DURATIONS (Days before race)
TAPER_RUN_5K=2                            # 5km race: 2 days
TAPER_RUN_10K=2                           # 10km race: 2 days
TAPER_RUN_HALF=3                          # Half marathon: 3 days
TAPER_RUN_MARATHON=5                      # Marathon: 5 days
TAPER_RUN_ULTRA=5                         # Ultra (>42.2km): 5 days

# 🚴 CYCLING TAPER DURATIONS (Days before race)
TAPER_RIDE_SHORT=2                        # <100km: 2 days
TAPER_RIDE_MEDIUM=2                       # 100-200km (4-6h): 2 days
TAPER_RIDE_LONG=4                         # >200km (12h+): 4 days
TAPER_RIDE_ULTRA=4                        # Ultra endurance: 4 days

# 🥾 HIKING TAPER DURATIONS (Days before race)
TAPER_HIKE_SHORT=1                        # <50km: 1 day
TAPER_HIKE_MEDIUM=2                       # 50-100km: 2 days
TAPER_HIKE_LONG=3                         # >100km: 3 days

# Taper Volume Reductions (% of normal volume for each taper day)
# Day -1 = day before race, Day -2 = 2 days before, etc.
TAPER_VOLUME_DAY_1=20                     # Day before race: 20% of normal
TAPER_VOLUME_DAY_2=30                     # 2 days before: 30% of normal
TAPER_VOLUME_DAY_3=50                     # 3 days before: 50% of normal
TAPER_VOLUME_DAY_4=60                     # 4 days before: 60% of normal
TAPER_VOLUME_DAY_5=70                     # 5 days before: 70% of normal

# Overtraining Protection Settings
# Threshold for strain potential that triggers overtraining warning
# Values above 1.0 indicate excessive training stress accumulation
# Typical range: 0.8-1.2 (lower = more conservative, higher = more aggressive)
OVERTRAINING_THRESHOLD=1.0

# Readiness Score Component Weights (must sum to 1.0)
# These determine the relative importance of each factor in readiness calculation
READINESS_WEIGHT_HRV=0.4          # Heart Rate Variability importance
READINESS_WEIGHT_SLEEP=0.35       # Sleep quality importance
READINESS_WEIGHT_STRESS=0.25      # Stress level importance

# Environmental Optimal Ranges (for performance adjustment)
# Temperature range for optimal performance (Celsius)
OPTIMAL_TEMP_MIN=10
OPTIMAL_TEMP_MAX=20
# Humidity range for optimal performance (percentage)
OPTIMAL_HUMIDITY_MIN=40
OPTIMAL_HUMIDITY_MAX=60
# Wind speed threshold (km/h) - performance degrades above this
OPTIMAL_WIND_MAX=15
# Altitude adaptation threshold (meters) - requires acclimatization above this
ALTITUDE_THRESHOLD=1500

# 🏃 POST-RACE RECOVERY PERIODS (Days after race)
# Running recovery based on distance and intensity
RECOVERY_RUN_5K=1                         # 5km: 1 day easy
RECOVERY_RUN_10K=2                        # 10km: 2 days easy
RECOVERY_RUN_HALF=4                       # Half marathon: 8 days recovery
RECOVERY_RUN_MARATHON=8                   # Marathon: 1 week recovery
RECOVERY_RUN_50K=7                        # 50km ultra: 1 week recovery
RECOVERY_RUN_70K=10                       # 70km ultra: 10 days recovery
RECOVERY_RUN_100K=14                      # 100km+: 2 weeks recovery

# 🚴 POST-RACE RECOVERY PERIODS (Cycling)
RECOVERY_RIDE_SHORT=1                     # <100km: 1 day
RECOVERY_RIDE_MEDIUM=2                    # 100-200km: 2 days
RECOVERY_RIDE_LONG=3                      # 200-300km: 3 days
RECOVERY_RIDE_ULTRA=5                     # 300km+: 5 days

# 🥾 POST-RACE RECOVERY PERIODS (Hiking)
RECOVERY_HIKE_SHORT=1                     # <50km: 1 day
RECOVERY_HIKE_MEDIUM=3                    # 50-100km: 3 days
RECOVERY_HIKE_LONG=5                      # 100km+: 5 days

# Recovery intensity limits (% of normal intensity)
RECOVERY_DAY_1_INTENSITY=0                # Day after: complete rest
RECOVERY_DAY_2_INTENSITY=20               # Day 2: very light activity only
RECOVERY_DAY_3_INTENSITY=30               # Day 3: light recovery
RECOVERY_WEEK_1_INTENSITY=50              # Week 1: 50% normal intensity
RECOVERY_WEEK_2_INTENSITY=75              # Week 2: 75% normal intensity

# Peak Performance Targets (what form level to achieve)
PEAK_FORM_TARGET=25                       # Target TSB for race day (15-35)
OPTIMAL_FITNESS_RANGE=95,110              # Fitness range for peak performance
RACE_READINESS_THRESHOLD=80               # Minimum comprehensive readiness for racing

# Sport Load Multipliers (Olympic-Level Enhancement)
# These adjust Training Stress Score (TSS) based on sport-specific systemic impact
# 1.0 = baseline (cycling), >1.0 = higher stress, <1.0 = lower stress
# Based on biomechanical impact, muscle damage, and recovery demands
LOAD_MULTIPLIER_RUNNING=1.3        # High impact, eccentric muscle damage
LOAD_MULTIPLIER_CYCLING=1.0        # Baseline - low impact, concentric
LOAD_MULTIPLIER_HIKING=0.8         # Moderate impact, elevation changes
LOAD_MULTIPLIER_WEIGHT_TRAINING=1.3 # High neuromuscular stress
LOAD_MULTIPLIER_WORKOUT=1.1        # Mixed stress patterns
LOAD_MULTIPLIER_ROWING=0.9         # Low impact, full body distribution
LOAD_MULTIPLIER_SWIMMING=0.8       # Lowest impact, buoyancy support
LOAD_MULTIPLIER_SKIING=1.4         # High technical demand + i  mpact
LOAD_MULTIPLIER_YOGA=0.5           # Recovery activity, minimal stress

# Duration Calculation Multipliers (TSS to minutes conversion)
# Base conversion: 1 TSS ≈ 1 minute for moderate intensity
# Adjust for workout type intensity and efficiency
DURATION_MULTIPLIER_REST=0.0
DURATION_MULTIPLIER_RECOVERY=1.2        # Longer, very easy pace
DURATION_MULTIPLIER_AEROBIC=1.0         # Standard pace
DURATION_MULTIPLIER_TEMPO=0.85          # Moderately hard, shorter
DURATION_MULTIPLIER_THRESHOLD=0.75      # Hard pace, shorter duration
DURATION_MULTIPLIER_VO2MAX=0.65         # Very hard, much shorter
DURATION_MULTIPLIER_NEUROMUSCULAR=0.5   # Power intervals, very short
DURATION_MULTIPLIER_LONG=1.4            # Longer endurance sessions
DURATION_MULTIPLIER_INTERVALS=0.7       # High intensity, shorter
DURATION_MULTIPLIER_FARTLEK=0.9         # Variable intensity

# TSS per Minute Target Rates (for realistic duration calculation)
# These define how much TSS should be generated per minute for each workout type
# Higher intensity workouts generate more TSS per minute
TSS_PER_MINUTE_REST=0.0              # Rest day - no training load
TSS_PER_MINUTE_RECOVERY=0.6          # Easy recovery - very low intensity
TSS_PER_MINUTE_AEROBIC=0.8           # Zone 2 aerobic - moderate intensity
TSS_PER_MINUTE_LONG=0.9              # Long steady - slightly higher than aerobic
TSS_PER_MINUTE_FARTLEK=1.2           # Mixed intensity with bursts
TSS_PER_MINUTE_TEMPO=1.4             # Tempo/threshold pace - high intensity
TSS_PER_MINUTE_THRESHOLD=1.6         # Threshold intervals - very high intensity
TSS_PER_MINUTE_INTERVALS=1.8         # High-intensity intervals - highest TSS/min
TSS_PER_MINUTE_VO2MAX=2.0            # VO2max intervals - maximum intensity
TSS_PER_MINUTE_NEUROMUSCULAR=1.5     # Short, explosive - high but brief

# Minimum TSS per Minute Thresholds (for workout intensity validation)
# These are the minimum acceptable TSS rates for each workout type
# Used to catch and fix unrealistic workout planning (e.g., 81 TSS for 85min intervals)
MIN_TSS_PER_MINUTE_RECOVERY=0.4      # Minimum for recovery workouts
MIN_TSS_PER_MINUTE_AEROBIC=0.6       # Minimum for aerobic workouts
MIN_TSS_PER_MINUTE_LONG=0.7          # Minimum for long workouts
MIN_TSS_PER_MINUTE_FARTLEK=0.9       # Minimum for fartlek workouts
MIN_TSS_PER_MINUTE_TEMPO=1.2         # Minimum for tempo workouts
MIN_TSS_PER_MINUTE_THRESHOLD=1.3     # Minimum for threshold workouts
MIN_TSS_PER_MINUTE_INTERVALS=1.5     # Minimum for interval workouts
MIN_TSS_PER_MINUTE_VO2MAX=1.7        # Minimum for VO2max workouts
MIN_TSS_PER_MINUTE_NEUROMUSCULAR=1.2 # Minimum for neuromuscular workouts

# Recovery Time Multipliers (for calculating recovery needs)
RECOVERY_MULTIPLIER_REST=0.0
RECOVERY_MULTIPLIER_RECOVERY=0.5
RECOVERY_MULTIPLIER_AEROBIC=1.0
RECOVERY_MULTIPLIER_TEMPO=1.2
RECOVERY_MULTIPLIER_THRESHOLD=1.5
RECOVERY_MULTIPLIER_VO2MAX=2.0
RECOVERY_MULTIPLIER_NEUROMUSCULAR=2.5
RECOVERY_MULTIPLIER_LONG=1.3
RECOVERY_MULTIPLIER_INTERVALS=1.8

# Adaptive Model Parameters (Individual Athlete Optimization)
# These enable the system to learn from your personal recovery patterns
ENABLE_ADAPTIVE_PARAMETERS=true    # Enable ML-based parameter adaptation
INITIAL_FITNESS_DECAY=42           # Starting fitness decay rate (days)
INITIAL_FATIGUE_DECAY=7            # Starting fatigue decay rate (days)
ADAPTATION_RATE=0.05               # How quickly model learns (0.01-0.1)
MIN_FITNESS_DECAY=20               # Minimum allowed fitness decay
MAX_FITNESS_DECAY=60               # Maximum allowed fitness decay
MIN_FATIGUE_DECAY=3                # Minimum allowed fatigue decay
MAX_FATIGUE_DECAY=14               # Maximum allowed fatigue decay



# MESOCYCLE CONFIGURATION (Training Periodization)
# These control the load patterns and intensity distribution for each training phase
# Loads are in TSS (Training Stress Score) per day
# Intensity distributions must sum to 1.0 for each mesocycle

# ADAPTATION Phase (Base Building)
MESOCYCLE_ADAPTATION_LOADS=90,105,120,50        # Week 1, 2, 3, recovery week
MESOCYCLE_ADAPTATION_EASY=0.40                  # % of easy workouts
MESOCYCLE_ADAPTATION_MODERATE=0.35              # % of moderate workouts
MESOCYCLE_ADAPTATION_HARD=0.25                  # % of hard workouts

# ACCUMULATION Phase (Volume Building)
MESOCYCLE_ACCUMULATION_LOADS=100,115,130,60     # Progressive volume increase
MESOCYCLE_ACCUMULATION_EASY=0.35                # Balanced intensity
MESOCYCLE_ACCUMULATION_MODERATE=0.40            # Volume focus
MESOCYCLE_ACCUMULATION_HARD=0.25                # Some quality work

# INTENSIFICATION Phase (Quality Focus)
MESOCYCLE_INTENSIFICATION_LOADS=95,105,115,125,65  # 4:1 pattern with intensity
MESOCYCLE_INTENSIFICATION_EASY=0.30                # Less easy work
MESOCYCLE_INTENSIFICATION_MODERATE=0.35            # Moderate intensity
MESOCYCLE_INTENSIFICATION_HARD=0.35                # High intensity focus

# REALIZATION Phase (Taper)
MESOCYCLE_REALIZATION_LOADS=70,55,40,25         # Progressive taper
MESOCYCLE_REALIZATION_EASY=0.70                 # Mostly easy
MESOCYCLE_REALIZATION_MODERATE=0.20             # Some moderate
MESOCYCLE_REALIZATION_HARD=0.10                 # Minimal hard work

# RECOVERY Phase (Active Recovery)
MESOCYCLE_RECOVERY_LOADS=50,45,55,45            # Increased slightly for better fitness maintenance
MESOCYCLE_RECOVERY_EASY=1.0                     # Only easy workouts during recovery
MESOCYCLE_RECOVERY_MODERATE=0.0                 # No moderate work during recovery
MESOCYCLE_RECOVERY_HARD=0.00                    # No hard work during recovery

# MAINTENANCE Phase (Steady State)
MESOCYCLE_MAINTENANCE_LOADS=65,65,65,50         # Stable loads with recovery
MESOCYCLE_MAINTENANCE_EASY=0.75                 # Mostly easy
MESOCYCLE_MAINTENANCE_MODERATE=0.20             # Some moderate
MESOCYCLE_MAINTENANCE_HARD=0.05                 # Minimal hard

# PEAK Phase (Competition Prep)
MESOCYCLE_PEAK_LOADS=85,75,65,50                # Decreasing volume, maintain intensity
MESOCYCLE_PEAK_EASY=0.50                        # Balanced easy
MESOCYCLE_PEAK_MODERATE=0.30                    # Good moderate
MESOCYCLE_PEAK_HARD=0.20                        # Quality hard work

# TAPER Phase (Pre-Competition)
MESOCYCLE_TAPER_LOADS=60,45,30,20               # Significant volume reduction
MESOCYCLE_TAPER_EASY=0.60                       # More easy
MESOCYCLE_TAPER_MODERATE=0.25                   # Some moderate
MESOCYCLE_TAPER_HARD=0.15                        # Maintain some intensity
